{"version":3,"sources":["store/action.js","store/reducers.js","components/FilmCard/FilmCard.js","components/FilmsList/FilmsList.js","components/FormField/FormField.js","validation.js","components/NewFilm/NewFilm.js","components/FilmDetails/FilmDetails.js","App.js","index.js"],"names":["ACTION_TYPES","ADD_NEW_FILM","addNewFilm","film","type","payload","store","createStore","state","action","concat","Object","toConsumableArray","id","title","description","imgUrl","imdbUrl","FilmCard","props","react_default","a","createElement","react_router_dom","to","className","src","alt","href","defaultProps","FilmsList","films","getState","map","FilmCard_FilmCard_FilmCard","assign","key","FormField","memo","error","name","label","onChange","placeholder","value","inputClass","cx","is-danger","controlClass","has-icons-right","Control","htmlFor","required","initialState","formValidators","NewFilm","handleChange","_ref","_ref$target","target","_this","setState","prevState","defineProperty","handleSubmit","e","preventDefault","onAdd","formValue","getFormValue","_this$validate","validate","hasError","errors","newState","_ref3","_ref4","slicedToArray","fromEntries","entries","this","reduce","acc","entry","_objectSpread","_ref5","_ref6","fieldData","validator","some","errorData","_this$state","onSubmit","components_FormField_FormField","Component","FilmDetails","_Component","classCallCheck","possibleConstructorReturn","getPrototypeOf","apply","arguments","inherits","createClass","_this$props","API_URL","App","_getPrototypeOf2","_len","length","args","Array","_key","call","searchWord","handleAddFilm","dispatch","shortid","generate","forceUpdate","handleSearchChange","_ref2","searchFilm","asyncToGenerator","regenerator_default","mark","_callee","filmResponce","Title","Plot","Poster","Website","imdbID","wrap","_context","prev","next","fetch","sent","json","undefined","Error","t0","console","message","stop","_x","_this2","filmsList","basename","process","onClick","react_router","exact","path","render","FilmsList_FilmsList_FilmsList","match","find","f","String","params","FilmDetails_FilmDetails","components_NewFilm_NewFilm","ReactDOM","App_App","document","getElementById"],"mappings":"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","file":"static/js/main.39c04580.chunk.js","sourcesContent":["export const ACTION_TYPES = {\n  ADD_NEW_FILM: 'FILM::ADD',\n};\n\nexport const addNewFilm = film => ({\n  type: ACTION_TYPES.ADD_NEW_FILM,\n  payload: film,\n});\n","import { createStore } from 'redux';\n\nimport {\n  ACTION_TYPES,\n} from './action';\n\nfunction reducer(state, action) {\n  const { ADD_NEW_FILM } = ACTION_TYPES;\n\n  switch (action.type) {\n    case ADD_NEW_FILM: {\n      return [\n        ...state,\n        action.payload,\n      ];\n    }\n\n    default:\n      return state;\n  }\n}\n\nconst films = [{\n  id: '1',\n  title: 'Groundhog Day',\n  description: 'A weatherman finds himself inexplicably ' +\n    'living the same day over and over again.',\n  imgUrl: 'https://m.media-amazon.com/images/M/MV5BZWIxNzM5YzQtY2FmMS00Yjc3LWI1ZjUtNGVjMjMzZTIxZTIxXkEyXkFqcGdeQXVyNjU0OTQ0OTY@._V1_SY1000_CR0,0,671,1000_AL_.jpg',\n  imdbUrl: 'https://www.imdb.com/title/tt0107048/',\n}];\n\nexport const store = createStore(reducer, films);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport './FilmCard.scss';\n\nimport { Link } from 'react-router-dom';\n\nexport const FilmCard = (props) => {\n  const {\n    id,\n    title,\n    description,\n    imgUrl,\n    imdbUrl,\n  } = props;\n\n  return (\n    <Link to={`/film/${id}`} className=\"card\">\n      <div className=\"card-image\">\n        <figure className=\"image is-4by3\">\n          <img\n            src={imgUrl}\n            alt=\"Film logo\"\n          />\n        </figure>\n      </div>\n      <div className=\"card-content\">\n        <div className=\"media\">\n          <div className=\"media-left\">\n            <figure className=\"image is-48x48\">\n              <img\n                src=\"https://images-na.ssl-images-amazon.com/images/I/315W5zxAnTL._SY355_.png\"\n                alt=\"imdb\"\n              />\n            </figure>\n          </div>\n          <div className=\"media-content\">\n            <p className=\"title is-4\">{title}</p>\n          </div>\n        </div>\n\n        <div className=\"content\">\n          {description}\n          <br />\n          <a href={imdbUrl}>IMDB</a>\n        </div>\n      </div>\n    </Link>\n  );\n};\n\nFilmCard.propTypes = {\n  id: PropTypes.string.isRequired,\n  title: PropTypes.string.isRequired,\n  description: PropTypes.string,\n  imgUrl: PropTypes.string.isRequired,\n  imdbUrl: PropTypes.string.isRequired,\n};\n\nFilmCard.defaultProps = {\n  description: '',\n};\n","import React from 'react';\nimport './FilmsList.scss';\n\nimport { store } from '../../store/reducers';\nimport { FilmCard } from '../FilmCard/FilmCard';\n\nexport const FilmsList = () => {\n  const films = store.getState();\n\n  return (\n    <div className=\"films\">\n      {films.map(film => (\n        <FilmCard key={film.id} {...film} />\n      ))}\n    </div>\n  );\n};\n","import React, { memo } from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport './FormField.scss';\n\nconst FormField = memo((props) => {\n  const {\n    error,\n    name,\n    label,\n    type,\n    onChange,\n    placeholder,\n    value,\n  } = props;\n\n  const inputClass = cx('input', { 'is-danger': !!error });\n  const controlClass = cx('control', { 'has-icons-right': !!error });\n\n  const Control = type === 'textarea' ? type : 'input';\n\n  return (\n    <div className=\"field\">\n      <label htmlFor={name} className=\"label\">\n        {label}\n      </label>\n      <div className={controlClass}>\n        <Control\n          name={name}\n          id={name}\n          className={inputClass}\n          type={type}\n          placeholder={placeholder}\n          value={value}\n          onChange={onChange}\n        />\n        {error && (\n          <span className=\"icon is-small is-right\">\n            <i className=\"fas fa-exclamation-triangle\" />\n          </span>\n        )}\n      </div>\n\n      {error && (\n        <p className=\"help is-danger\">{error}</p>\n      )}\n    </div>\n  );\n});\n\nFormField.propTypes = {\n  name: PropTypes.string.isRequired,\n  value: PropTypes.string.isRequired,\n  label: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  type: PropTypes.string,\n  error: PropTypes.string,\n  placeholder: PropTypes.string,\n};\n\nFormField.defaultProps = {\n  error: '',\n  type: 'text',\n  placeholder: 'Type text here',\n};\n\nexport default FormField;\n","export const required = (name, value) => {\n  return value\n    ? null\n    : `Field ${name} is required`;\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport FormField from '../FormField/FormField';\nimport { required } from '../../validation';\n\nconst initialState = {\n  title: {\n    value: '',\n    error: null,\n  },\n  description: {\n    value: '',\n    error: null,\n  },\n  imgUrl: {\n    value: '',\n    error: null,\n  },\n  imdbUrl: {\n    value: '',\n    error: null,\n  },\n};\n\nconst formValidators = {\n  title: required,\n  imgUrl: required,\n  imdbUrl: required,\n};\n\nclass NewFilm extends Component {\n  state = initialState;\n\n  getFormValue() {\n    return Object.entries(this.state)\n      .reduce((acc, entry) => ({\n        ...acc,\n        [entry[0]]: entry[1].value,\n      }), {});\n  }\n\n  handleChange = ({ target: { name, value } }) => {\n    this.setState(prevState => ({\n      [name]: {\n        value,\n        error: prevState[name].error,\n      },\n    }));\n  };\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n\n    const { onAdd } = this.props;\n    const formValue = this.getFormValue();\n\n    const { hasError, errors } = this.validate();\n\n    if (hasError) {\n      this.setState((prevState) => {\n        const newState = errors.map(([name, error]) => {\n          return [\n            name,\n            {\n              error,\n              value: prevState[name].value,\n            },\n          ];\n        });\n\n        return Object.fromEntries(newState);\n      });\n    } else {\n      this.setState(initialState);\n      onAdd(formValue);\n    }\n  };\n\n  validate() {\n    const errors = Object.entries(this.state)\n      .map(([name, fieldData]) => {\n        const validator = formValidators[name];\n        const error = validator\n          ? validator(name, fieldData.value)\n          : null;\n\n        return [name, error];\n      });\n\n    const hasError = errors\n      .some(errorData => !!errorData[1]);\n\n    return {\n      hasError,\n      errors,\n    };\n  }\n\n  render() {\n    const {\n      title,\n      description,\n      imgUrl,\n      imdbUrl,\n    } = this.state;\n\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <FormField\n          {...title}\n          name=\"title\"\n          placeholder=\"Input film title\"\n          label=\"Title\"\n          onChange={this.handleChange}\n        />\n        <FormField\n          {...description}\n          type=\"textarea\"\n          name=\"description\"\n          placeholder=\"Input film description\"\n          label=\"Description\"\n          onChange={this.handleChange}\n        />\n        <FormField\n          {...imgUrl}\n          name=\"imgUrl\"\n          placeholder=\"Paste image url\"\n          label=\"Image url\"\n          onChange={this.handleChange}\n        />\n        <FormField\n          {...imdbUrl}\n          name=\"imdbUrl\"\n          placeholder=\"Paste IMDB url\"\n          label=\"IMDB url\"\n          onChange={this.handleChange}\n        />\n\n        <button\n          type=\"submit\"\n          className=\"button is-primary\"\n        >\n          Add film\n        </button>\n      </form>\n    );\n  }\n}\n\nNewFilm.propTypes = {\n  onAdd: PropTypes.func.isRequired,\n};\n\nexport default NewFilm;\n","/* eslint-disable max-len */\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nexport class FilmDetails extends Component {\n  render() {\n    const {\n      title,\n      description,\n      imgUrl,\n      imdbUrl,\n    } = this.props;\n\n    return (\n      <div className=\"card\">\n        <div className=\"card-image\">\n          <figure className=\"image is-4by3\">\n            <img\n              src={imgUrl}\n              alt=\"Film logo\"\n            />\n          </figure>\n        </div>\n        <div className=\"card-content\">\n          <div className=\"media\">\n            <div className=\"media-left\">\n              <figure className=\"image is-48x48\">\n                <img\n                  src=\"https://images-na.ssl-images-amazon.com/images/I/315W5zxAnTL._SY355_.png\"\n                  alt=\"imdb\"\n                />\n              </figure>\n            </div>\n            <div className=\"media-content\">\n              <p className=\"title is-4\">{title}</p>\n            </div>\n          </div>\n\n          <div className=\"content\">\n            {description}\n            <br />\n            <a href={imdbUrl}>IMDB</a>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nFilmDetails.propTypes = {\n  title: PropTypes.string.isRequired,\n  description: PropTypes.string,\n  imgUrl: PropTypes.string.isRequired,\n  imdbUrl: PropTypes.string.isRequired,\n};\n\nFilmDetails.defaultProps = {\n  description: '',\n};\n","import React, { Component } from 'react';\nimport {\n  BrowserRouter,\n  Switch,\n  Route,\n} from 'react-router-dom';\nimport shortid from 'shortid';\nimport './App.scss';\n\nimport { FilmsList } from './components/FilmsList';\nimport NewFilm from './components/NewFilm/NewFilm';\nimport FormField from './components/FormField/FormField';\nimport { FilmDetails } from './components/FilmDetails';\n\nimport { store } from './store/reducers';\n\nimport {\n  addNewFilm,\n} from './store/action';\n\nconst API_URL = 'https://www.omdbapi.com/?apikey=2f4a38c9&t=';\n\nexport class App extends Component {\n  state = {\n    searchWord: '',\n  };\n\n  handleAddFilm = ({\n    title,\n    description,\n    imgUrl,\n    imdbUrl,\n  }) => {\n    store.dispatch(addNewFilm({\n      id: shortid.generate(),\n      title,\n      description,\n      imgUrl,\n      imdbUrl,\n    }));\n\n    this.forceUpdate();\n  };\n\n  handleSearchChange = ({ target }) => this.setState({\n    searchWord: target.value,\n  });\n\n  searchFilm = async(searchWord) => {\n    try {\n      const filmResponce = await fetch(`${API_URL}${searchWord}`);\n      const {\n        Title,\n        Plot,\n        Poster,\n        Website,\n        imdbID,\n      } = await filmResponce.json();\n\n      if (imdbID === undefined) {\n        throw new Error('Film not found');\n      }\n\n      store.dispatch(addNewFilm({\n        id: imdbID,\n        title: Title,\n        description: Plot,\n        imgUrl: Poster,\n        imdbUrl: Website,\n      }));\n\n      this.forceUpdate();\n    } catch (error) {\n      console.error(error.message);\n    }\n  };\n\n  render() {\n    const { filmsList, searchWord } = this.state;\n\n    return (\n      <BrowserRouter basename={ process.env.PUBLIC_URL }>\n        <div className=\"page\">\n          <div className=\"content\">\n            <div className=\"box\">\n              <FormField\n                value={searchWord}\n                name=\"searchWord\"\n                placeholder=\"Type search word\"\n                label=\"Search film\"\n                onChange={this.handleSearchChange}\n              />\n              <button\n                onClick={() => this.searchFilm(searchWord)}\n                type=\"button\"\n                className=\"button is-primary\"\n              >\n                Search film\n              </button>\n            </div>\n\n            <Switch>\n              <Route\n                exact\n                path=\"/\"\n                render={() => (\n                  <FilmsList />\n                )}\n              />\n              <Route\n                exact\n                path=\"/film/:id\"\n                render={({ match }) => {\n                  const film = filmsList\n                    .find(f => String(f.id) === match.params.id);\n\n                  return (\n                    <FilmDetails {...film} />\n                  );\n                }}\n              />\n            </Switch>\n          </div>\n          <div className=\"sidebar\">\n            <NewFilm onAdd={this.handleAddFilm} />\n          </div>\n        </div>\n      </BrowserRouter>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { App } from './App';\nimport 'bulma/css/bulma.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}